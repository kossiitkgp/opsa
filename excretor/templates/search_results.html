{% for message in messages %}
<div 
    class="message" 
    id="{{ message.timestamp }}{{ message.user_id }}"
    hx-trigger="click"
    hx-get="/messages/{{ message.channel_id }}?per_page=10"
    hx-target="#channel-content"
    hx-swap="innerHTML"
>
    <img
        class="avatar"
        src="{{ message.user.image_url }}"
        alt="User Avatar"
        hx-trigger="error"
        hx-swap="outerHTML"
        hx-get="/fallback-avatar"
        hx-target="this"
    />
    <div class="message-inner-container">
        <div class="user-and-time">
            <span class="name">{{ message.user.name }}</span>
            <span class="time"> {{ message.formatted_timestamp }} </span>
        </div>
        <div class="message-content">{{ message.text|safe }}</div>
    </div>
</div>
{% endfor %}